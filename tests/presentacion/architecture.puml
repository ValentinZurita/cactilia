@startuml Cactilia Detailed Architecture (Visual Style)

!theme vibrant
' Use vibrant theme for colors similar to the example, or remove for default B/W

skinparam rectangle {
    roundCorner 25
}
skinparam cloud {
    roundCorner 25
}
skinparam database {
    roundCorner 25
}
skinparam component {
    roundCorner 10
}

package "Cliente" {
  rectangle "React App (SPA)" as ReactApp {
    component "Componentes UI" as UI
    component "React Router" as Router
    component "Redux Toolkit" as StateMgmt
    component "Firebase SDK" as ClientSDK

    UI -> Router : navegación
    UI -> StateMgmt : gestión estado
    StateMgmt -> ClientSDK : operaciones Firebase
  }
}

cloud "Firebase (Plataforma BaaS)" {
  package "Backend & Hosting" {
      component "Firebase Auth" as Auth
      component "Cloud Functions" as Functions
      database "Cloud Firestore" as Firestore
      database "Cloud Storage" as Storage
      component "Firebase Hosting" as Hosting
  }
}

cloud "Servicios Externos" {
    component "Stripe API" as Stripe
    component "Servicio de Correo" as EmailService
}

' Conexiones Principales
ReactApp <-down- Hosting : Sirve App (HTTPS)

ClientSDK .> Auth : Autenticación
ClientSDK .> Firestore : CRUD (Datos)
ClientSDK .> Storage : Archivos
ClientSDK .> Functions : Invocación Backend

Functions -> Firestore : Accede/Modifica Datos
Functions -> Storage : Accede/Modifica Archivos
Functions -> Auth : Verifica Tokens
Functions -> Stripe : Procesa Pagos
Functions -> EmailService : Envía Correos



@enduml 