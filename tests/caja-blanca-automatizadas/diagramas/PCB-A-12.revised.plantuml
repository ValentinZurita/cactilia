@startuml PCB-A-12.revised
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontColor black
skinparam arrowColor black
skinparam shadowing false

title Validación de Reglas de Envío para Direcciones

start
:1. Inicio isRuleValidForAddress;

if (2. ¿rule y address existen?) then (No)
  :3. Retornar false;
  stop
else (Sí)
endif

:4. Extraer zipCode de address;

if (5. ¿zipCode existe?) then (No)
  :6. Retornar false;
  stop
else (Sí)
endif

if (7. ¿!rule.restrictions || rule.hasNationalCoverage?) then (Sí)
  :8. Retornar true;
  stop
else (No)
  :9. Verificar hasZipCodeMatch(rule.restrictions, zipCode);
  :10. Retornar resultado de la verificación;
  stop
endif

@enduml 