@startuml PCB-A-13
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontColor black
skinparam arrowColor black
skinparam shadowing false

title Diagrama de Flujo - validateReferenceCode()

start
:1. Recibir código de referencia;

if (¿code existe?) then (No)
  :2. Retornar false;
  stop
else (Sí)
endif

if (¿code es string?) then (No)
  :4. Retornar false;
  stop
else (Sí)
endif

:5. Eliminar espacios en blanco
code = code.trim();

if (¿6 <= code.length <= 20?) then (No)
  :6. Retornar false;
  stop
else (Sí)
endif

if (¿formato válido? (regex: /^[A-Z0-9]+$/)) then (No)
  :7. Retornar false;
  stop
else (Sí)
endif

if (¿comienza con 'REF'?) then (No)
  :10. Retornar false;
  stop
else (Sí)
endif

:11. Calcular suma de códigos ASCII;

if (¿suma % 7 == 0?) then (No)
  :12. Retornar false;
  stop
else (Sí)
endif

:13. Retornar true;
stop

@enduml 