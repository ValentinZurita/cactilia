@startuml PCB-A-15
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontColor black
skinparam arrowColor black
skinparam shadowing false

title Diagrama de Flujo - calculateCartDiscount

start

:Recibir parámetro 'cart';

if (cart == null o undefined?) then (sí)
  :Retornar 0;
  stop
else (no)
  if (cart.items no existe o está vacío?) then (sí)
    :Retornar 0;
    stop
  else (no)
    :Calcular subtotal sumando 
    price * quantity de cada item;
    
    if (subtotal >= 15000) then (sí)
      :Establecer tasa de descuento = 10%;
    else if (subtotal >= 10000) then (sí)
      :Establecer tasa de descuento = 7%;
    else if (subtotal >= 5000) then (sí)
      :Establecer tasa de descuento = 5%;
    else (no)
      :Establecer tasa de descuento = 0%;
    endif
    
    :Calcular monto de descuento = 
    subtotal * tasa de descuento;
    
    :Redondear a 2 decimales y retornar;
    
    stop
  endif
endif

@enduml 